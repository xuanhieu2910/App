import { BuildStepRuntimeError } from './errors.js';
export class BuildStepOutput {
    static createProvider(params) {
        return (ctx, stepDisplayName) => new BuildStepOutput(ctx, { ...params, stepDisplayName });
    }
    constructor(
    // @ts-expect-error ctx is not used in this class but let's keep it here for consistency
    ctx, { id, stepDisplayName, required = true }) {
        this.ctx = ctx;
        this.id = id;
        this.stepDisplayName = stepDisplayName;
        this.required = required;
    }
    get value() {
        if (this.required && this._value === undefined) {
            throw new BuildStepRuntimeError(`Output parameter "${this.id}" for step "${this.stepDisplayName}" is required but it was not set.`);
        }
        return this._value;
    }
    set(value) {
        if (this.required && value === undefined) {
            throw new BuildStepRuntimeError(`Output parameter "${this.id}" for step "${this.stepDisplayName}" is required.`);
        }
        this._value = value;
        return this;
    }
}
export function makeBuildStepOutputByIdMap(outputs) {
    if (outputs === undefined) {
        return {};
    }
    return outputs.reduce((acc, output) => {
        acc[output.id] = output;
        return acc;
    }, {});
}
//# sourceMappingURL=BuildStepOutput.js.map